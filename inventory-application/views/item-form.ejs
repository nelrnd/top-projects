<%
const item = locals.item || {name: "", description: "", price_in_dollar: "", stock_quantity: "", category_id: "", brand_id: ""}
const { name, description, price_in_dollar, stock_quantity, category_id, brand_id} = item
%>

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> | MUSIC STORE></title>
    <link rel="stylesheet" href="/styles/style.css" />
  </head>
  <body>
    <%- include("navbar") %>
    <h1><%= title %></h1>

    <form action="<%= locals.item ? `/item/${item.id}/update` : "/item/new" %>" method="POST">
      <div>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="<%= name %>" required />
      </div>

      <div>
        <label for="desc">Description:</label>
        <textarea id="desc" name="desc"><%= description %></textarea>
      </div>

      <div>
        <label for="price">Price (in $):</label>
        <input type="number" id="price" name="price" value="<%= price_in_dollar %>" />
      </div>

      <div>
        <label for="quantity">Quantity in stock:</label>
        <input type="number" id="quantity" name="quantity" value="<%= stock_quantity %>" />
      </div>

      <div>
        <label for="category">Category:</label>
        <select id="category" name="category">
          <% category_list.map((category) => { %>
            <option 
            value="<%= category.category_id %>" 
            <% if (category.category_id === category_id) { %>
              <%= "selected" %>
            <% } %>
            ><%= category.category_name %></option>
          <% }) %>
        </select>
      </div>

      <div>
        <label for="brand">Brand:</label>
        <select id="brand" name="brand">
          <% brand_list.map((brand) => { %>
            <option 
            value="<%= brand.brand_id %>"
            <% if (brand.brand_id === brand_id) { %>
              <%= "selected" %>
            <% } %>
            ><%= brand.brand_name %></option>
          <% }) %>
        </select> 
      </div>

      <button type="submit"><%= title %></button>
    </form>
  </body>
</html>
